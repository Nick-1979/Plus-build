(()=>{var e,t,o,n,r={69314:()=>{},18983:()=>{},48731:(e,t,o)=>{"use strict";o.d(t,{UT:()=>a,k8:()=>r});var n=o(33661);function r(e,t){return function(e,t){if(!e)throw new Error((0,n.m)(t)?t():t)}(null!=e,t),e}function a(e){throw new Error(`This codepath should be unreachable. Unhandled input: ${e}`)}},26234:(e,t,o)=>{"use strict";var n=o(48801),r=o(95292),a=o(52107),i=o(36631),l=o(60576),s=o(38090);const d=(0,i.Z)((async function(e){const t=new l.U(e);return await s.G.create({provider:t})}));var c=o(64021),u=o(51330),p=o(57928);const f=new Uint8Array(32),b=(0,c.d)("modl");function m(e,t,o){return e.registry.createType("AccountId32",(0,u.e)(b,e.consts.nominationPools.palletId.toU8a(),new Uint8Array([o]),(0,p.a)(t,{bitLength:32}),f)).toString()}const w=(0,i.Z)((function(e,t){return{rewardId:m(e,t,1),stashId:m(e,t,0)}}));onmessage=e=>{const{endpoint:t,id:o,stakerAddress:i}=e.data;(async function(e,t,o){var i,l;console.log(`getPool is called for ${t} id:${o}`);const s=await d(e),c=!o&&await s.query.nominationPools.poolMembers(t),u=null!=c&&c.isSome?c.unwrap():void 0;if(!u&&!o)return console.log(`can not find member for ${t} or id is :${o}`),null;const p=null!==(i=null==u||null===(l=u.poolId)||void 0===l?void 0:l.toNumber())&&void 0!==i?i:o,f=w(s,p);if(!f)return console.log(`can not find a pool with id:${o}`),null;const[b,m,g,h,v]=await Promise.all([s.query.nominationPools.metadata(p),s.query.nominationPools.bondedPools(p),s.query.nominationPools.rewardPools(p),s.query.system.account(f.rewardId),s.derive.staking.account(f.stashId)]);console.log("stashIdAccount:",v);const y=g.isSome?g.unwrap():null,O=m.isSome?m.unwrap():null,P=(0,a.x)(r.nw,h.data.free.sub(s.consts.balances.existentialDeposit)),S=await async function(e,t,o,a,i){const l=e.consts.balances.existentialDeposit,s=(await e.query.system.account(i)).data.free.sub(l).add(new n(a.totalRewardsClaimed)).sub(new n(a.lastRecordedTotalPayouts)),d=new n(10).pow(new n(18));return(o.isZero()?r.nw:s.mul(d).div(o)).add(a.lastRecordedRewardCounter).sub(t.lastRecordedRewardCounter).mul(t.points).div(d)}(s,u,O.points,y,f.rewardId),j={};y&&(j.balance=null!=y&&y.balance?String(y.balance):void 0,j.points=null!=y&&y.points?String(y.points):void 0,j.totalEarnings=null!=y&&y.totalEarnings?String(y.totalEarnings):void 0);const x={accounts:f,bondedPool:O,ledger:null==v?void 0:v.stakingLedger,member:u,metadata:b.length?b.isUtf8?b.toUtf8():b.toString():null,myClaimable:Number(S),poolId:p,redeemable:Number(null==v?void 0:v.redeemable),rewardClaimable:Number(P),rewardIdBalance:h.data,rewardPool:y,stashIdAccount:v};return JSON.stringify(x)})(t,i,o).then((e=>{postMessage(e)}))}}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var o=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=r,i.x=()=>{var e=i.O(void 0,[593],(()=>i(26234)));return i.O(e)},e=[],i.O=(t,o,n,r)=>{if(!o){var a=1/0;for(c=0;c<e.length;c++){for(var[o,n,r]=e[c],l=!0,s=0;s<o.length;s++)(!1&r||a>=r)&&Object.keys(i.O).every((e=>i.O[e](o[s])))?o.splice(s--,1):(l=!1,r<a&&(a=r));if(l){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,n,r]},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var r=Object.create(null);i.r(r);var a={};t=t||[null,o({}),o([]),o(o)];for(var l=2&n&&e;"object"==typeof l&&!~t.indexOf(l);l=o(l))Object.getOwnPropertyNames(l).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,i.d(r,a),r},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,o)=>(i.f[o](e,t),t)),[])),i.u=e=>e+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={849:1};i.f.i=(t,o)=>{e[t]||importScripts(i.p+i.u(t))};var t=("undefined"!=typeof self?self:this).webpackChunk_polkadot_extension=("undefined"!=typeof self?self:this).webpackChunk_polkadot_extension||[],o=t.push.bind(t);t.push=t=>{var[n,r,a]=t;for(var l in r)i.o(r,l)&&(i.m[l]=r[l]);for(a&&a(i);n.length;)e[n.pop()]=1;o(t)}})(),n=i.x,i.x=()=>i.e(593).then(n),i.x()})();